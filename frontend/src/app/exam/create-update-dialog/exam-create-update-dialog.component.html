<div class="dialog-header">
    <h1 md-dialog-title>{{ 'i18n.modules.exam.add' | translate }}</h1>
</div>
<form [formGroup]="examCreateUpdateForm" (submit)="submit()">
    <div class="dialog-body" md-dialog-content>
        <div class="form-group">
            <md-input-container>
                <input mdInput [placeholder]="'i18n.modules.exam.dialogs.add.name.label' | translate"
                       formControlName="name">
                <md-error *ngIf="examCreateUpdateForm.get('name').invalid && examCreateUpdateForm.get('name').touched">
                    <ng-template [ngIf]="examCreateUpdateForm.get('name').hasError('required')">
                        {{ 'i18n.common.form.error.required' | translate }}
                    </ng-template>
                </md-error>
            </md-input-container>
        </div>
        <div class="form-group">
            <md-input-container>
                <textarea mdInput [placeholder]="'i18n.modules.exam.dialogs.add.desc.label' | translate"
                          formControlName="description"></textarea>
                <md-error
                    *ngIf="examCreateUpdateForm.get('description').invalid && examCreateUpdateForm.get('description').touched">
                    <ng-template [ngIf]="examCreateUpdateForm.get('description').hasError('required')">
                        {{ 'i18n.common.form.error.required' | translate }}
                    </ng-template>
                </md-error>
            </md-input-container>
        </div>
        <div class="form-group half">
            <div class="half-child">
                <md-input-container>
                    <input mdInput
                           [mdDatepicker]="examDatePicker"
                           [placeholder]="'i18n.common.label.todoDate' | translate"
                           formControlName="date">
                    <button mdSuffix
                            [mdDatepickerToggle]="examDatePicker"
                            type="button"></button>
                    <md-error align="start"
                              *ngIf="examCreateUpdateForm.get('date').invalid && examCreateUpdateForm.get('date').touched">
                        <ng-template [ngIf]="examCreateUpdateForm.get('date').hasError('required')">
                            {{ 'i18n.common.form.error.required' | translate }}
                        </ng-template>
                    </md-error>
                </md-input-container>
                <md-datepicker #examDatePicker [touchUi]="isMobile()"></md-datepicker>
            </div>
            <div class="half-child">
                <md-select formControlName="subjectId"
                           [placeholder]="'i18n.modules.exam.dialogs.add.subject.label' | translate">
                    <md-option *ngFor="let subject of subjects" [value]="subject.id">{{ subject.name }}</md-option>
                </md-select>
            </div>
        </div>
        <!--        <div formGroupName="examTasksGroup">

                    <md-list>
                        <ng-template ngFor let-examTask [ngForOf]="param.examTasks" let-i="index">
                            <md-list-item>
                                <md-checkbox [checked]="examTask.finished"
                                             formControlName="taskControl">
                                    <md-input-container class="check-box-input">
                                        <input id="debugId" mdInput [value]="examTask.task" formControlName="{{i}}">
                                    </md-input-container>
                                </md-checkbox>
                            </md-list-item>
                        </ng-template>
                        <md-list-item>
                            <md-checkbox formControlName="newTaskControl">
                                <md-input-container class="check-box-input">
                                    <input mdInput value="">
                                </md-input-container>
                            </md-checkbox>
                        </md-list-item>
                    </md-list>
                </div>-->
        <div formArrayName="examTasks" class="form-group">
            <md-list>
                <md-list-item *ngFor="let examTask of examTaskArray.controls; let i=index" [formGroupName]="i">
                    <md-checkbox formControlName="finished"></md-checkbox>
                    <md-input-container>
                        <input mdInput formControlName="task">
                    </md-input-container>
                </md-list-item>
            </md-list>
            <div md-dialog-actions>
                <button md-raised-button
                        [disabled]="examTaskArray.length >= 15"
                        (click)="addExamTask()">Test
                </button>
            </div>
        </div>
        <!--        <div *ngIf="withMark" class="form-group" formGroupName="mark">
                    <div class="half">
                        <md-input-container>
                            <input mdInput type="number" step="0.1" value="4.0" formControlName="markValue">
                        </md-input-container>
                        <md-input-container>
                            <input mdInput type="number" step="0.1" value="1.0" formControlName="markWeight">
                        </md-input-container>
                    </div>
                </div>-->
    </div>
    <div class="dialog-footer" md-dialog-actions>
        <div class="footer-right">
            <button md-button type="button" md-dialog-close>{{ 'i18n.common.action.cancel' | translate }}</button>
            <button md-raised-button color="primary" type="submit">{{ 'i18n.common.action.save' | translate }}</button>
        </div>
    </div>
</form>
