<div class="row" [formGroup]="searchForm">
    <div class="col m6 offset-m3">
        <router-outlet></router-outlet>
        <h1>Tasks</h1>
        <md-input-container id="task-search">
            <input md-input [placeholder]="'i18n.modules.task.filter.search' | translate" formControlName="searchTerm">
        </md-input-container>
    </div>
</div>
<div class="row" [formGroup]="filterForm">
    <div class="col m6 offset-m3">
        <md-card class="list-card">
            <md-list>
                <h2 md-subheader>Your Tasks</h2>
                <task-list-item *ngFor="let task of filteredTasks" [task]="task"
                                (markDone)="markTaskAsDone($event)"></task-list-item>
            </md-list>
        </md-card>
    </div>
    <div class="col m3">
        <md-card>
            <md-card-title>{{'i18n.modules.task.filter.title' | translate}}</md-card-title>
            <md-card-content>
                <div class="form-group">
                    <label>{{'i18n.modules.task.filter.subject' | translate}}</label>
                    <md-select formControlName="subjectId">
                        <template ngFor let-subjectClass [ngForOf]="filterData.schoolClassSubjects">
                            <md-option *ngFor="let subject of subjectClass.subjects" [value]="subject.id">
                                {{ subjectClass.schoolClass.normalizedName + ' - ' + subject.name }}
                            </md-option>
                        </template>
                    </md-select>
                </div>
                <div class="form-group">
                    <md-slide-toggle formControlName="finished">
                        {{'i18n.modules.task.filter.showPending' | translate}}
                    </md-slide-toggle>
                </div>
            </md-card-content>
            <md-card-actions>
                <button md-raised-button color="primary" (click)="doFilter()">{{'i18n.common.action.filter' |
                    translate}}
                </button>
                <button md-raised-button (click)="resetFilter()">{{'i18n.common.action.reset' |
                    translate}}
                </button>
            </md-card-actions>
        </md-card>
    </div>
</div>
<button md-fab [mdTooltip]="'i18n.modules.task.add' | translate" mdTooltipPosition="left" (click)="addTask()">
    <md-icon>add</md-icon>
</button>
